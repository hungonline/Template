<!DOCTYPE html>
<html lang="vi" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="" />
    <meta name="description"
          content="Demo GUIDE, EBOOK">
    <meta name="keywords" content="">
    <title>
        DEMO MENU, GUIDE, EBOOK
    </title>
    <link type="image/x-icon" href="//ssl.gstatic.com/docs/doclist/images/infinite_arrow_favicon_5.ico"
          rel="shortcut icon" />
    <link rel="stylesheet" href="css/menu.css" media="all" />
</head>

<body class="">

<div style="border-bottom: 1px solid #ccc; background-color: #eee; text-align: center; padding: 5px">
<h2>EBOOK DEMO MENU</h2>
</div>


<div class="vm-doc">

    <a class="vm_toggle"  href="javascript:;">
        <!--         <img alt="" src="images/icons/book.svg">-->
        <img alt="" src="images/icons/menu1.svg">
        <img class="active" alt="" src="images/icons/book-active.svg">
    </a>

    <div class="container flex">
        <div class="col-left">
            <div class="vm-doc-sidebar-col">
                <nav class="vm-doc-sidebar" id="vm-doc-sidebar">


                    <ul class="nav vm-doc-sidenav custom-scrollbar">


                        <li class="nav-item">
                            <button aria-hidden="true"></button>
                            <a class="nav-link" href="#sec0" >HOME</a>
                        </li>


                        <li class="nav-item has-child">
                            <button aria-hidden="true"></button>
                            <a class="nav-link" href="#sec1" >Executive Summary</a>
                            <ol class="nav">
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec1-1" >
                                        <span class="text">Business Case</span>
                                    </a>
                                </li>
                            </ol>
                        </li>



                        <li class="nav-item has-child">
                            <button aria-hidden="true"></button>
                            <a class="nav-link" href="#sec2" >Technology Overview</a>
                            <ol class="nav">
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec2-1" >
                                        <span class="text">VMware vSphere with Tanzu</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec2-2" >
                                        <span class="text">Dell EMC VxRail</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec2-3" >
                                        <span class="text">Streaming and Searching Applications</span>
                                    </a>
                                </li>
                            </ol>
                        </li>
                        <li class="nav-item has-child">
                            <button aria-hidden="true"></button>
                            <a class="nav-link" href="#sec3" >Test Tools</a>
                            <ol class="nav">
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec3-1" >
                                        <span class="text">Monitoring Tools</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec3-2" >
                                        <span class="text">Workload Generation and Testing Tools</span>
                                    </a>
                                </li>
                            </ol>
                        </li>
                        <li class="nav-item has-child">
                            <button aria-hidden="true"></button>
                            <a class="nav-link" href="#sec4" >Solution Configuration</a>
                            <ol class="nav">
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec4-1" >
                                        <span class="text">Architecture Diagram</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a id="#sec4-2" class="nav-link" href="#sec4-2" >
                                        <span class="text">Hardware Resources1</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec4-3" >
                                        <span class="text">Software Resources</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec4-4" >
                                        <span class="text">Network Configuration</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec4-5" >
                                        <span class="text">vSAN Configuration</span>
                                    </a>
                                </li>
                            </ol>
                        </li>
                        <li class="nav-item has-child">
                            <button aria-hidden="true"></button>
                            <a class="nav-link" href="#sec5" >Solution Validation</a>
                            <ol class="nav">
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec5-1" >
                                        <span class="text">Deployment and Basic Function Testing</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec5-2" >
                                        <span class="text">Load Testing</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec5-3" >
                                        <span class="text">Monitoring with Prometheus and Grafana</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#sec5-4" >
                                        <span class="text">Use Case</span>
                                    </a>
                                </li>
                            </ol>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#sec6" >Production Criteria Recommendations</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#sec7" >Conclusion</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#sec8" >References</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#sec9" >Appendix: The Helm/Providers/private.yaml file from the Confluent Operator Fileset</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#sec10" >About the Author</a>
                        </li>
                    </ul>
                </nav>

            </div>
        </div>

        <div class="col-right">
            <div class="article-body">
                <span id="sec0" class="vm-doc-section item_tl">
                </span>
                <h1>Running Modern Applications with VMware vSphere with Tanzu </h1>
                <div class="vm-doc-section">
                    <p><strong>Note:</strong> This solution provides general design and deployment guidelines for running Confluent Kafka with vSphere with Tanzu. It is showcased in this paper running on Dell EMC VxRail. The reference architecture applies to any compatible hardware platforms running vSphere with Tanzu.</p>
                </div>
                <div id="sec1"  class="vm-doc-section item_tl">
                    <h2>
                        Executive Summary
                    </h2>
                </div>
                <div id="sec1-1"  class="vm-doc-section item_tl">
                    <h3>
                        Business Case
                    </h3>
                    <p>Real-time applications have become popular for optimal digital experiences. However, many organizations struggle to build these real-time applications because they are unable to access and leverage the massive amount of data sprawled across traditional and next generation infrastructures. The Confluent Platform and VMware vSphere® with VMware Tanzu<span>™ </span>bridges infrastructure silos and empowers developers to consolidate various data sources for their modern apps. It also allows developers and IT operators to rapidly deploy and scale Apache Kafka and the underlying infrastructure with resiliency and security.</p>
                    <p><span>The Confluent Platform is an enterprise-ready platform that complements Kafka with advanced capabilities designed to help accelerate application development and connectivity as a collection of infrastructure services, tools, and guidance for making all of your company’s data readily available as real-time streams.</span></p>
                    <p><span>Dell EMC VxRail™, powered by Dell EMC PowerEdge server platforms and VxRail HCI System Software, features next-generation technology to future proof your infrastructure and enables deep integration across the VMware ecosystem. Advanced VMware hybrid cloud integration and automation simplifies the deployment of a secure VxRail cloud infrastructure.</span></p>
                </div>
                <div id="sec2" class="vm-doc-section item_tl">
                    <h2>
                        Technology Overview
                    </h2>
                    <p><span>The technology components in this solution are:</span></p>
                    <ul>
                        <li><span>VMware vSphere with Tanzu </span></li>
                        <li><span>Dell EMC VxRail </span></li>
                        <li><span>Confluent Kafka</span></li>
                        <li><span>Elasticsearch</span></li>
                        <li><span>Kibana</span></li>
                        <li><span>Spark</span></li>
                        <li><span>Solr </span></li>
                    </ul>
                </div>
                <div id="sec2-1" class="vm-doc-section item_tl">
                    <h3>
                        VMware vSphere with Tanzu
                    </h3>
                    <p><span>vSphere with Tanzu is the fastest way to get started with Kubernetes workloads on existing infrastructure and modernize the 70 million+ workloads now running on vSphere. vSphere with Tanzu allows customers to deploy a Developer ready infrastructure, align both Dev Ops and IT teams, and simplify cloud operations. </span></p>
                    <p><span>vSphere also simplifies operations by the sharing of AI infrastructure for cloud pools of GPU resources and intrinsic security for the hybrid cloud infrastructure.</span></p>
                    <p><span>VMware vSphere with Tanzu allows customers to deploy all block, file, and object<sup>[1]</sup></span><span>&nbsp;storage infrastructure for both VM based and container based workloads. The Cloud Native Storage component is natively available in VMware vCenter Server®. It is an extension of vCenter Server management that implements provisioning and lifecycle operations for persistent volumes. It can: </span></p>
                    <ul>
                        <li><span>Provision and manage lifecycle operations for container volumes </span></li>
                        <li><span>Integrate with Storage Policy Based Management (SPBM) for the placement of disks, unifying the storage management of VMs and containers on a single platform with a common set of storage policies </span></li>
                    </ul>
                </div>
                <div id="sec2-2" class="vm-doc-section item_tl">
                    <h3 class="h2">
                        Dell EMC VxRail
                    </h3>
                    <p><span>The only fully integrated, pre-configured, and pre-tested VMware hyperconverged integrated system optimized for VMware vSAN and VMware Cloud Foundation, VxRail transforms HCI networking and simplifies VMware cloud adoption while meeting any HCI use case - including support for many of the most demanding workloads and applications. Powered by Dell EMC PowerEdge server platforms and VxRail HCI System Software, VxRail features next-generation technology to future proof your infrastructure and enables deep integration across the VMware ecosystem. The advanced VMware hybrid cloud integration and automation simplifies the deployment of a secure VxRail cloud infrastructure. </span></p>
                </div>
                <div id="sec2-3" class="vm-doc-section item_tl">
                    <h3 class="h2">
                        Streaming and Searching Applications
                    </h3>
                    <p><a href="http://kafka.apache.org/" target="_blank"><span>Apache Kafka</span></a><span> is a community distributed event streaming platform capable of handling trillions of events a day. Initially conceived as a messaging queue, Kafka is based on an abstraction of a distributed commit log. Since being created and open sourced by LinkedIn in 2011, Kafka has quickly evolved from a messaging queue to a full-fledged event streaming platform.</span></p>
                    <p><span>Founded by the original developers of Apache Kafka, Confluent delivers the most complete distribution of Kafka with the Confluent Platform. The Confluent Platform improves Kafka with additional community and commercial features designed to enhance the streaming experience of both operators and developers in production at a massive scale.</span></p>
                    <h3>Elasticsearch</h3>
                    <p><a id="lpos-apps-scodevmw---78"  ></a><a href="https://www.elastic.co/elasticsearch/" target="_blank"><span>Elasticsearch</span></a> <span>is a distributed, RESTful search and analytics engine capable of addressing a growing number of use cases. As the heart of the</span> <a href="https://www.elastic.co/elastic-stack" target="_blank"><span>Elastic Stack</span></a><span>, </span><span>it centrally stores your data for lightning-fast search, fine</span><span>‑</span><span>tuned relevancy, and powerful analytics that scale with</span> <span>ease.</span></p>
                    <h3>Kibana</h3>
                    <p><a id="lpos-apps-scodevmw---80" ></a><a href="https://www.elastic.co/what-is/kibana" target="_blank"><span>Kibana</span></a> <span>is an open-source frontend application that sits on top of the Elastic Stack, providing search and data visualization capabilities for data indexed in Elasticsearch. Commonly known as the charting tool for the Elastic Stack (previously referred to as the ELK Stack after Elasticsearch, Logstash, and Kibana), Kibana also acts as the user interface for monitoring, managing, and securing an Elastic Stack cluster — as well as the centralized hub for built-in solutions developed on the Elastic Stack. Developed in 2013 from within the Elasticsearch community, Kibana has grown to become the window into the Elastic Stack itself, offering a portal for users and companies.</span></p>
                    <h3>Spark</h3>
                    <p><a href="https://spark.apache.org/" target="_blank"><span>Apache Spark</span></a> is a unified analytics engine for large-scale data processing. It provides high-level APIs in Java, Scala, Python, R, and an optimized engine that supports general execution graphs. It also supports a rich set of higher-level tools, including Spark SQL for SQL and structured data processing, MLlib for machine learning, GraphX for graph processing, and Structured Streaming for incremental computation and stream processing.</p>
                    <h3>Solr</h3>
                    <p><a href="https://solr.apache.org/" target="_blank"><span>Solr</span></a><span> is the popular blazing-fast, open-source enterprise search platform built on Apache Lucene. Solr is highly reliable, scalable, and fault tolerant, providing distributed indexing, replication, and load-balanced querying, automated failover and recovery, centralized configuration, and more. Solr powers the search and navigation features of many of the world’s largest internet sites. </span></p>
                </div>
                <div id="sec3" class="vm-doc-section item_tl">
                    <h2 id="test-tools">
                        Test Tools
                    </h2>
                    <p><span>We leverage the following monitoring and benchmark tools in the scope of our functional validation of Kafka on VMware vSphere with Tanzu.</span></p>
                </div>
                <div id="sec3-1" class="vm-doc-section item_tl">
                    <h3 class="h2" id="monitoring-tools">
                        Monitoring Tools
                    </h3>
                    <p><span>vSAN Performance Service</span></p>
                    <p><span>vSAN Performance Service is used to monitor the performance of the vSAN environment through the vSphere Client. The performance service collects and analyzes performance statistics and displays the data in a graphical format. You can use the performance charts to manage your workload and determine the root cause of problems.</span></p>
                    <p><span>Prometheus and Grafana</span></p>
                    <p><span>Prometheus is an open-source system monitoring and alerting toolkit. It can collect metrics from target clusters at specified intervals, evaluate rule expressions, display the results, and trigger alerts if certain conditions arise. </span></p>
                    <p><span>Grafana is open-source visualization and analytics software. It allows you to query, visualize, alert on, and explore your metrics no matter where they are stored. In other words, Grafana provides you with tools to turn your time-series database (TSDB) data into high-quality graphs and visualizations.</span></p>
                </div>
                <div id="sec3-2" class="vm-doc-section item_tl">
                    <h3 class="h2" id="workload-generation-and-testing-tools">
                        Workload Generation and Testing Tools
                    </h3>
                    <p><span>The Confluent Platform Kafka CLI testing tools</span></p>
                    <p><span>The standard Confluent Platform Kafka application deployment provides several command-line utilities that allow for the simulation of message production and consumption. We use the </span><code>kafka-topics</code><span>, </span><code>kafka-producer-perf-test</code><span>, and </span><code>kafka-consumer-perf-test</code><span> command-line utilities to generate our test workloads.</span></p>
                </div>

                <div id="sec4" class="vm-doc-section item_tl">
                    <h2 id="solution-configuration">
                        Solution Configuration
                    </h2>
                    <p><span>This section introduces the resources and configurations: </span></p>
                    <ul>
                        <li><span>Architecture diagram</span></li>
                        <li><span>Hardware resources </span></li>
                        <li><span>Software resources</span></li>
                        <li><span>Network configuration</span></li>
                        <li><span>vSAN configuration</span></li>
                    </ul>
                </div>
                <div id="sec4-1" class="vm-doc-section item_tl">
                    <h3 class="h2" id="architecture-diagram">
                        Architecture Diagram
                    </h3>
                    <p><span>vSphere with Tanzu embeds Kubernetes in the vSphere control plane. A Tanzu Kubernetes Grid cluster is a full distribution of the open-source Kubernetes software that is packaged, signed, and supported by VMware. We deployed Confluent Platform as pods running in a Tanzu Kubernetes Grid cluster (Figure 1).</span></p>
                    <p><img alt="Diagram, timeline</p>
                     <p>Description automatically generated" data-entity-type="image" data-entity-uuid="0" data-index="11-0" height="398" width="367" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.001.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.001.png"></p>
                    <p><strong><span>Figure 1. TKG Cluster on vSphere with Tanzu Architecture</span></strong></p>
                    <p><span>In our solution, we created a 4-node VxRail P570F cluster for vSphere with Tanzu and HAProxy. In vSphere with Tanzu, you can use the Tanzu Kubernetes Grid Service to provision Tanzu Kubernetes clusters on the Supervisor Cluster. You can invoke the Tanzu Kubernetes Grid Service API declaratively by using kubectl and a YAML definition.</span></p>
                    <p><span>Table 1 shows the deployment of vSphere with Tanzu. In the YAML manifest file, we defined the size of Tanzu Kubernetes Grid workers as guaranteed-xlarge.</span></p>
                    <p><strong><span>Table 1. VMs Configuration</span></strong></p>
                    <div class="table-responsive">
                        <table class="table">
                            <tbody>
                            <tr>
                                <td>
                                    <p><strong><span>VM Role</span></strong></p>
                                </td>
                                <td>
                                    <p><strong><span>vCPU</span></strong></p>
                                </td>
                                <td>
                                    <p><strong><span>Memory (GB)</span></strong></p>
                                </td>
                                <td>
                                    <p><strong><span>Storage</span></strong></p>
                                </td>
                                <td>
                                    <p><strong><span>VM Count</span></strong></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>Supervisor Control Plane VM</span></p>
                                </td>
                                <td>
                                    <p><span>16</span></p>
                                </td>
                                <td>
                                    <p><span>32</span></p>
                                </td>
                                <td>
                                    <p><span>22 GB (OS)</span></p>
                                </td>
                                <td>
                                    <p><span>3</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>Tanzu Kubernetes Grid cluster – Control Plane </span></p>
                                </td>
                                <td>
                                    <p><span>4</span></p>
                                </td>
                                <td>
                                    <p><span>32</span></p>
                                </td>
                                <td>
                                    <p><span>16 GB (OS)</span></p>
                                </td>
                                <td>
                                    <p><span>3</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>Tanzu Kubernetes Grid cluster – Worker </span></p>
                                </td>
                                <td>
                                    <p><span>8</span></p>
                                </td>
                                <td>
                                    <p><span>64</span></p>
                                </td>
                                <td>
                                    <p><span>16 GB (OS)</span></p>
                                </td>
                                <td>
                                    <p><span>6</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>HAProxy</span></p>
                                </td>
                                <td>
                                    <p><span>2</span></p>
                                </td>
                                <td>
                                    <p><span>4</span></p>
                                </td>
                                <td>
                                    <p><span>20 GB</span></p>
                                </td>
                                <td>
                                    <p><span>1</span></p>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <p><span>For Kafka pods, we can customize the parameters of the YAML file for better performance. In this solution, we used 3-6 Kafka Brokers to validate. Each Kafka Broker pod was requested with 4 vCPU and 32GB. Kafka relies heavily on ZooKeeper cluster, and all brokers will be registered with ZooKeeper at the startup. We assigned each ZooKeeper pod with 2 vCPUs and 8 GB memory. The </span><a href="#appendix-the-helmprovidersprivateyaml-file-from-the-confluent-operator-fileset" ><span>Appendix</span></a><span> demonstrates the YAML files used in the solution.</span></p>
                </div>
                <div id="sec4-2" class="vm-doc-section item_tl">
                    <h3 class="h2" id="hardware-resources">
                        Hardware Resources
                    </h3>
                    <p><span>In this solution, we used a total of four VxRail P570F nodes. Each server was configured with two disk groups, and each disk group consisted of one cache-tier write-intensive SAS SSD and four capacity-tier read-intensive SAS SSDs. </span></p>
                    <p><span>Each VxRail node in the cluster had the configuration shown in Table 2. </span></p>
                    <p><strong><span>Table 2. Hardware Configuration for VxRail </span></strong></p>
                    <div class="table-responsive">
                        <table class="table">
                            <tbody>
                            <tr>
                                <td>
                                    <p><span>PROPERTY</span></p>
                                </td>
                                <td>
                                    <p><span>SPECIFICATION</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>VxRail node </span></p>
                                </td>
                                <td>
                                    <p><span>VxRail P570F</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>CPU</span></p>
                                </td>
                                <td>
                                    <p><span>2 x Intel(R) Xeon(R) Platinum 8180M CPU @ 2.50GHz, 28 cores each</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>RAM</span></p>
                                </td>
                                <td>
                                    <p><span>512 GB</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>Network adapter </span></p>
                                </td>
                                <td>
                                    <p><span>2 x Broadcom BCM57414 NetXtreme-E 10Gb/25Gb RDMA Ethernet Controller</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>Storage adapter</span></p>
                                </td>
                                <td>
                                    <p><span>1 x Dell HBA330 Adapter</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>Disks</span></p>
                                </td>
                                <td>
                                    <p><span>Cache - 2 x 800GB Write Intensive SAS SSDs</span></p>
                                    <p><span>Capacity - 8 x 3.84TB Read Intensive SAS SSDs</span></p>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="sec4-3" class="vm-doc-section item_tl">
                    <h3 class="h2" id="software-resources">
                        Software Resources
                    </h3>
                    <p><span>Table 3 shows the software resources used in this solution</span><strong><span>. </span></strong></p>
                    <p><strong><span>Table 3. Software Resources</span></strong></p>
                    <div class="table-responsive">
                        <table class="table">
                            <tbody>
                            <tr>
                                <td>
                                    <p><span>Software</span></p>
                                </td>
                                <td>
                                    <p><span>Version</span></p>
                                </td>
                                <td>
                                    <p><span>Purpose</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>Dell EMC VxRail HCI System Software</span></p>
                                </td>
                                <td>
                                    <p><span>7.0.132</span></p>
                                </td>
                                <td>
                                    <p><span>Turnkey Hyperconverged Infrastructure for hybrid cloud.</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>VMware vCenter Server and ESXi</span></p>
                                </td>
                                <td>
                                    <p><span>7.0 u1c/u1d</span></p>
                                </td>
                                <td>
                                    <p><span>V</span><span>Mware vSphere is a suite of products: vCenter Server and ESXi.</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>VMware vSAN</span></p>
                                </td>
                                <td>
                                    <p><span>7.0 u1d</span></p>
                                </td>
                                <td>
                                    <p><span>vSAN is the storage component to provide low-cost and high-performance next-generation HCI solutions.</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>Kubernetes</span></p>
                                </td>
                                <td>
                                    <p><span>1.18.5</span></p>
                                </td>
                                <td>
                                    <p><span>Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>Confluent Kafka</span></p>
                                </td>
                                <td>
                                    <p><span>5.5.1</span></p>
                                </td>
                                <td>
                                    <p><span>Apache Kafka is a community distributed event streaming platform capable of handling trillions of events a day.</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>HAProxy</span></p>
                                </td>
                                <td>
                                    <p><span>0.1.8</span></p>
                                </td>
                                <td>
                                    <p><span>HAProxy provides load balancing for developers accessing the Tanzu Kubernetes control plane and Kubernetes Services of Type Load Balancer.</span></p>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="sec4-4" class="vm-doc-section item_tl">
                    <h3 class="h2" id="network-configuration">
                        Network Configuration
                    </h3>
                    <p><span>Figure 2 shows the VMware vSphere Distributed Switch™ network configuration for TKG cluster in vSphere with Tanzu on VxRail. All hosts are connected from the cluster to a vSphere Distributed Switch. There are two options when deploying HAProxy. It can be deployed with 2 NICs or 3 NICs. In this solution, HAProxy is deployed with 2 NICs: one is connected to the management network; the second is connected to the workload network. The management network communicates with the Supervisor control plane while the workload network provides connectivity to the nodes of Tanzu Kubernetes clusters and to Supervisor cluster control plane VMs. The workload network must be layer 3 routable. HAProxy load balancers allocate the virtual IP traffic to either the Tanzu Kubernetes node IP or the control plane VM. External services send traffic to a virtual IP. Traffic is routed to the network where HAProxy is connected.</span></p>
                    <p><img alt="A picture containing graphical user interface</p>
                     <p>Description automatically generated" data-entity-type="image" data-entity-uuid="0" data-index="14-0" height="408" width="709" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.002.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.002.png"></p>
                    <p><strong><span>Figure 2. Tanzu Kubernetes Cluster Networking</span></strong></p>
                </div>
                <div id="sec4-5" class="vm-doc-section item_tl">
                    <h3 class="h2" id="vsan-configuration">
                        vSAN Configuration
                    </h3>
                    <p><span>The solution validation was conducted using the default vSAN datastore storage policy of RAID 1 FTT=1 with checksum enabled and both deduplication and compression disabled. This storage policy offers the best performance with the ability to tolerate up to one device failure (Figures 3 and 4).</span></p>
                    <p><img alt="A screenshot of a cell phone</p>
                     <p>Description automatically generated" data-entity-type="image" data-entity-uuid="0" data-index="15-0" height="128" width="433" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.003.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.003.png"></p>
                    <p><strong><span>Figure 3. vSAN Storage Policy Availability Settings</span></strong></p>
                    <p><img alt="A screenshot of a cell phone</p>
                     <p>Description automatically generated" data-entity-type="image" data-entity-uuid="0" data-index="15-1" height="266" width="433" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.004.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.004.png"></p>
                    <p><strong><span>Figure 4. vSAN Storage Policy Advanced Policy Rules</span></strong></p>
                </div>


                <div id="sec5" class="vm-doc-section item_tl">
                    <h2 id="solution-validation">
                        Solution Validation
                    </h2>
                    <p><span>This solution testing is a showcase of Confluent Kafka running on VMware vSphere with Tanzu for deployment, performance, monitoring, and use case. </span></p>
                    <p><span>The validation covers the following scenarios: </span></p>
                    <ul>
                        <li><span>Deployment and basic functionality: Install the Confluent Operator and the Confluent Helm Charts. Once the Confluent Platform is up and running, it produces a series of messages from the Kafka producer side and transports them to the Kubernetes-controlled Kafka brokers, and finally, sends them to the Kafka consumer side.</span></li>
                        <li><span>Load testing: Using an external Kafka setup with message producer and consumer processes to perform the loading test. We can change the number of messages sent and received and scale-out the Kafka brokers number to review the linear performance metrics.</span></li>
                        <li><span>Monitoring: vSphere with Tanzu provides TKG extensions that you can deploy to Tanzu Kubernetes cluster. Deploy Prometheus for monitoring, collecting metrics from the Kafka cluster and TKG cluster. Deploy Grafana for exploring metrics to visualization.</span></li>
                        <li><span>Use cases: Use Kafka and other distributed systems to build and manage stream processing architecture and logs analytics platform.</span></li>
                    </ul>
                </div>
                <div id="sec5-1" class="vm-doc-section item_tl">
                    <h3 class="h2" id="deployment-and-basic-function-testing">
                        Deployment and Basic Function Testing
                    </h3>
                    <p><span>With open-source Kafka, configuring and deploying a cluster can be a complex, manual process. As a result, deploying to production takes a significant amount of time. Should any configuration errors arise, it may delay the deployment, meaning that enterprises may not realize the maximum value from their investment in Kafka and event streaming.</span></p>
                    <p><span>Confluent Operator provides automated deployment tools to make resources available in a matter of minutes. Confluent Operator automates the deployment of Confluent Platform resources on Kubernetes. It also deploys a complete event streaming platform, meaning that multiple components of the platform can be deployed at once, accelerating the deployment of clusters to production.</span></p>
                    <p><span>To deploy a single Kafka cluster with multiple brokers (3 brokers) on TKG cluster, we used an edited “private.yaml” cluster specification in the ZooKeeper properties file, 3 Kafka broker properties with unique broker IDs, listener ports and log file directories, a Control Center properties file and properties files for any other Confluent Platform components with default settings to start with.</span></p>
                    <p><span>After the successful deployment, a list </span><strong><span>of healthy</span></strong><span> pods and services </span><span>are </span><span>shown. The red box marked shows the external IP of Kafka service. It identifies the access point to the Kafka brokers and load balancers.</span></p>
                    <p><img alt="Table</p>
                     <p>Description automatically generated" data-entity-type="image" data-entity-uuid="0" data-index="17-0" height="173" width="720" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.005.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.005.png"></p>
                    <p><img alt="Table</p>
                     <p>Description automatically generated" data-entity-type="image" data-entity-uuid="0" data-index="17-1" height="257" width="720" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.006.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.006.png"></p>
                    <p><strong><span>Figure 5. Confluent Kafka Services Running on VMware vSphere with Tanzu</span></strong></p>
                </div>
                <div id="sec5-2" class="vm-doc-section item_tl">
                    <h3 class="h2" id="load-testing">
                        Load Testing
                    </h3>
                    <p><span>After creating topics, you can use kafka-producer-perf-test to send test data to topics with the specified number of records and record size and run kafka-consumer-perf-test to consume from topics.</span></p>
                    <p><span>By making clusters more scalable, operators simplify day-to-day operations. As event streaming becomes more pervasive in an organization, the cluster needs to add additional brokers quickly with the proper configurations. With open-source Kafka, configuring and deploying more brokers can be a complex, manual process, which means it takes more time to scale the cluster (and it could be delayed due to human error).</span></p>
                    <p><span>With Operator, users can scale the Kafka cluster up or down by adding brokers and updating the Kafka broker configurations in a replicable way. This means clusters are faster to scale and can meet the internal developer demand for event streaming within an organization. In our solution, we scale out the number of Kafka brokers to determine the maximum number of messages processed from the producer and consumer side. We used the following Kafka brokers number, Kafka pods size, and the number of messages configuration as shown in Table 4 to perform the Producer performance testing.</span></p>
                    <p><strong><span>Table 4.</span></strong><strong><span>&nbsp; </span></strong><strong><span>Kafka Pods Size and Number of Messages Configuration for Different Number of Kafka Brokers</span></strong></p>
                    <div class="table-responsive">
                        <table class="table">
                            <tbody>
                            <tr>
                                <td>
                                    <p><strong><span>Number of Kafka Brokers</span></strong></p>
                                </td>
                                <td>
                                    <p><strong><span>Number of Messages </span></strong></p>
                                </td>
                                <td colspan="2">
                                    <p><strong><span>Kafka Pods Size</span></strong></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>3</span></p>
                                </td>
                                <td>
                                    <p><span>10 million </span></p>
                                </td>
                                <td rowspan="3">
                                    <p><span>2 vCPU</span></p>
                                    <p><span>16 GB Memory</span></p>
                                </td>
                                <td rowspan="3">
                                    <p>4 vCPU</p>
                                    <p>32 GB Memory</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>6</span></p>
                                </td>
                                <td>
                                    <p><span>100 million</span></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p><span>9</span></p>
                                </td>
                                <td>
                                    <p><span>500 million </span></p>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <p><strong><span>Note:</span></strong><span> Two sizes of Kafka pods were leveraged during the test. We recommend using the 4 vCPU and 32 GB memory one.</span><span>&nbsp; </span></p>
                </div>
                <div id="sec5-3" class="vm-doc-section item_tl">
                    <h3 class="h2" id="monitoring-with-prometheus-and-grafana">
                        Monitoring with Prometheus and Grafana
                    </h3>
                    <p><span>Tanzu Kubernetes Grid includes binaries for tools that provide in-cluster and shared services to the clusters running in a Tanzu Kubernetes Grid instance. Tanzu Kubernetes Grid provides cluster monitoring services by implementing the open-source Prometheus and Grafana projects. Prometheus can collect metrics from the TKG Kubernetes clusters.</span></p>
                    <p><span>After deploying Grafana, use the IP address of the LoadBalancer for the Envoy service to access the Grafana dashboard. Grafana provides the dashboard for the TKG Kubernetes cluster to visualize key metrics and supplement those metrics with resource usage and performance.</span></p>
                    <p><img alt="A screenshot of a computer</p>
                     <p>Description automatically generated with medium confidence" data-entity-type="image" data-entity-uuid="0" data-index="19-0" height="175" width="742" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.007.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.007.png"></p>
                    <p><strong>Figure 6. Cluster Monitoring via Prometheus</strong></p>
                    <p><span>We can also import JMX aggregated by Confluent Platform to Prometheus server. This dashboard can be used when diagnosing a problem or for monitoring metrics during the performance testing.</span></p>
                    <p><img alt="Graphical user interface</p>
                     <p>Description automatically generated" data-entity-type="image" data-entity-uuid="0" data-index="19-1" height="365" width="660" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.008.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.008.png"></p>
                    <p><strong>Figure 7. Confluent Cloud Dashboard</strong></p>
                </div>
                <div id="sec5-4" class="vm-doc-section item_tl">
                    <h3 class="h2" id="use-case">
                        Use Case
                    </h3>
                    <p><strong>Kafka+Spark+Solr</strong></p>
                    <p><img alt="Diagram</p>
                     <p>Description automatically generated with medium confidence" data-entity-type="image" data-entity-uuid="0" data-index="20-0" height="237" width="676" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.009.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.009.png"><br><strong>Figure 8. Kafka+Spark+Solr Use Case Workflow</strong></p>
                    <p><span>We deployed Kafka, Spark, and Solr on vSphere with Tanzu to provide Data Platform as a Service for analytic workloads. Collect, store, and process streaming data in real-time with the industry's enterprise-ready event streaming platform. This Platform complements Kafka with Spark streaming application to simplify enterprise operations at scale and enable event transformations through stream processing. Spark is a high-performance engine for large-scale computing tasks, such as data processing, machine learning, and real-time data streaming. Using Bitnami Helm charts reduced the complexity of the application deployment on Tanzu Kubernetes cluster by defining Kubernetes objects in the manifest files. Similarly, Solr is an extremely powerful and open-source enterprise searching platform optimized to search large volumes of text-centric data. Bitnami is used to automatically deployed Solr on the TKG Kubernetes cluster.</span></p>
                    <p><span>For validation, we added in real market data for a few stocks along with the sample applications created to both consume and publish that data across our platform.</span><span>&nbsp; </span><span>A small app was created to be able to consume the data from two stock symbols: VMW and AAPL. The app created consumed that data and then published all of the quotes and trades in Kafka. Then we used Spark Streaming to process market data coming from Kafka topics and to store and query data using Solr:</span></p>
                    <ol>
                        <li>Start Kafka server and brokers.</li>
                        <li>Create Kafka producers of two stocks and send data to Kafka.</li>
                        <li>Create topics of quotes and trades in Kafka to which data will be sent.</li>
                        <li>Create a collection in Solr and a Connector that reads market data from Kafka topics and writes into Solr Collections.</li>
                        <li>Create a Connector that reads the streaming data from Kafka topics, streams in Spark, and writes into Solr.</li>
                    </ol>
                    <p><strong>&nbsp;Kafka+Logstash+Elasticsearch+Kibana</strong></p>
                    <p><span>In the production environment, increasing logs causes the logging infrastructure to be overwhelmed. To protect Logstash and Elasticsearch from the impact of these data bursts, you can deploy a buffer mechanism to act as message brokers. Kafka is the most common broker solution deployed with the Elasticsearch stack. Generally, Kafka is used as the entry point for collecting data from your existing data stores. See the brief component introduction below:</span></p>
                    <ul>
                        <li><span>Filebeat: Collect logs and forward them to the Kafka broker cluster (topic).</span></li>
                        <li><span>Kafka: Buffer messages, improve the throughput, and makes system scale out easier.</span></li>
                        <li><span>Logstash: Logstash-logs can be collected, filtered, and analyzed from Kafka topics, and Logstash will push logs into the index of Elasticsearch at the same time.</span></li>
                        <li><span>Elasticsearch: Pour events into it so that you can serve queries.</span></li>
                        <li><span>Kibana: Elasticsearch front-end displays tools to help you summarize, analyze, and search important data logs.</span></li>
                    </ul>
                    <p><span>There are two ways to import data from Kafka to Elasticsearch: one is to create and configure the YAML files of the pipeline; the other is to use the Elasticsearch service sink connector provided by Confluent Platform, which can move data from Kafka to Elasticsearch. It writes data from a topic in Kafka to an index in Elasticsearch.</span></p>
                    <p><img alt="Chart</p>
                     <p>Description automatically generated with medium confidence" data-entity-type="image" data-entity-uuid="0" data-index="20-1" height="249" width="712" class=" lazyloaded" data-src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.010.png" src="/sites/default/files/imported-images/node_3009_0409-152134/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu/Running%20Modern%20Applications%20with%20VMware%20vSphere%20with%20Tanzu.010.png"></p>
                    <p><strong>Figure 9. Kafka+Logstash+Elasticsearch+Kibana Use Case Workflow</strong></p>
                </div>
                <div id="sec6" class="vm-doc-section item_tl">
                    <h2 id="production-criteria-recommendations">
                        Production Criteria Recommendations
                    </h2>
                    <p><span>Kafka provides application-level fault tolerance through native application clustering. When deployed on vSphere with Tanzu, it is best to consider the following recommended settings within Storage Policy Based Management (SPBM) and the vCenter vSAN Cluster level settings:</span></p>
                    <p><strong><span>SPBM </span></strong></p>
                    <p class="Indent1"><span style="color:#3498db;"><strong>FTT</strong></span></p>
                    <p class="Indent1"><span>The Number of Failures to Tolerate capability addresses the key customer and design requirement of availability. With FTT, availability is provided by maintaining replica copies of data to mitigate the risk of a host failure resulting in lost connectivity to data or potential data loss. The FTT policy works in conjunction with VMware vSphere High Availability to maintain availability and provide consistent and near continuous uptime to workloads.</span></p>
                    <p class="Indent1"><strong><span>Recommendation: 1 Failure (FTT=1) </span></strong></p>
                    <p class="Indent1"><span style="color:#3498db;"><strong>RAID</strong></span></p>
                    <p class="Indent1"><span>vSAN has the ability to use RAID1 for mirroring or RAID5/6 for Erasure Coding. Erasure coding can provide the same level of data protection as mirroring (RAID 1) while using less storage capacity.</span></p>
                    <p class="Indent1"><strong><span>Recommendation: RAID-1 (Mirroring)</span></strong></p>
                    <p><span>We recommend both FTT=1 and RAID1 from a performance and cost perspective. Using RAID1 will provide the best level of performance in conjunction with FTT=1, and provides operational efficiency and availability coupled with Kafka clustering. </span></p>
                    <p><strong><span>vSAN Cluster settings</span></strong></p>
                    <p class="Indent1"><span style="color:#3498db;"><strong>Deduplication and Compression</strong></span></p>
                    <p class="Indent1"><span>Deduplication and compression can greatly enhance space savings capabilities. However, to optimize performance with the Confluent Platform and Apache Kafka, we do not recommend enabling deduplication and compression. </span></p>
                    <p><span>&nbsp; &nbsp; &nbsp; &nbsp; </span><strong><span>Recommendation: Disable deduplication and compression</span></strong></p>
                    <p class="Indent1"><span style="color:#3498db;"><strong>Encryption</strong></span></p>
                    <p class="Indent1"><span>vSAN</span> <span>can perform data at rest encryption. Data is encrypted after all other processing, such as deduplication, is performed. Data At Rest Encryption or DARE encrypts the data on storage devices. Use encryption according to your company’s Information Security requirements. </span></p>
                    <p><strong><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></strong><strong><span>Recommendation: Enable Encryption as required per your InfoSec.</span></strong></p>
                    <p><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#3498db;"><strong>High Availability</strong></span></p>
                    <p class="Indent1"><span>vSphere HA provides high availability for virtual machines. Hosts in the cluster are monitored, and in the event of a failure, the virtual machines on a failed host are restarted on remaining available alternate hosts.</span></p>
                    <p class="Indent1"><strong><span>Recommendation: HA Enabled</span></strong></p>
                    <p class="Indent1"><span style="color:#3498db;"><strong>DRS </strong></span></p>
                    <p class="Indent1"><span>VMware vSphere Distributed Resource Scheduler™ (DRS) is the resource scheduling and load balancing solution for vSphere. DRS works on a cluster of ESXi hosts and provides resource management capabilities, such as workload balancing and virtual machine (VM) placement. DRS also enforces user-defined resource allocation policies at the cluster level while working with system-level constraints. </span></p>
                    <p class="Indent1"><span>We can specify VM/Host anti-affinity rules, DRS tries to schedule the TKG cluster worker nodes apart, not running on the same ESXi hosts. </span></p>
                    <p class="Indent1"><strong><span>Recommendation: DRS</span></strong><strong><span> </span></strong><strong><span>– partially automated</span></strong></p>
                    <p class="Indent1"><strong><span>Note:</span></strong><span> With partially automated mode, DRS will handle the initial placement of virtual machines. However, any further migration recommendations will be surfaced up to the administrator to decide whether to move the virtual machine. The administrator can check the recommendation and may decide not to migrate the virtual machine. Recommendations should be for hosts on the same site.</span></p>
                    <p><strong><span>Kafka</span></strong></p>
                    <p class="Indent1"><span style="color:#3498db;"><strong>Kafka Compression</strong></span></p>
                    <p class="Indent1"><span>We recommend using a Kafka supported type of compression (GZIP, LZ4, Snappy, Zstandard). Using compression will greatly improve both throughput and latency as well as minimize the impact to other workloads residing on the same vSAN cluster.</span><span>&nbsp; </span></p>
                    <p class="Indent1"><strong><span>Recommendation: Use compression</span></strong></p>
                    <p class="Indent1"><span style="color:#3498db;"><strong>Kafka Partitions and Replication Factors</strong></span></p>
                    <p class="Indent1"><span>Kafka replicates the topic across the cluster. With Replication factor, you can achieve fault tolerance. Consider performance requirements and use only as many brokers as you need to achieve that level of performance. Environment and use case will dictate the optimal number of Kafka partitions and/or replication factors. We recommend consulting </span><a href="https://www.confluent.io/online-talk/best-practices-for-apache-kafka-in-production-confluent-online-talk-series/" target="_blank"><span>Confluent Best Practices</span></a><span> to determine the number of partitions and/or replication factors that will meet your use case needs.</span></p>
                    <p class="Indent1"><strong><span>Recommendation: Refer to </span></strong><a href="https://www.confluent.io/resources/recommendations-for-deploying-apache-kafka-on-kubernetes/" target="_blank"><span>Confluent Best Practices</span></a><span>&nbsp;&nbsp;&nbsp; </span></p>
                    <p class="Indent1"><span style="color:#3498db;"><strong>Network and Storage</strong></span></p>
                    <p class="Indent1"><span>Kafka performance demands a low latency network with high bandwidth. As with Kafka broker, do not attempt to put all brokers on a single node, as this would reduce availability. If storage in the container is not persistent, data will be lost after restart. EmptyDir is used for Kafka data and will persist if the container restarts. So if the container starts, the failing broker first has to replicate all the data, which is a time-consuming process. That is why you should use a persistence volume; Kubernetes will be more flexible in choosing another node after restart or relocation. SSD is best used to serve with high throughput.</span></p>
                    <p class="Indent1"><span style="color:#3498db;"><strong>Operator</strong></span></p>
                    <p class="Indent1"><span>The Operator is a method of packaging, deploying, and managing a Kubernetes application. Confluent Operator makes it easy to bootstrap the Kafka cluster in a minute. Using a confluent operator, you almost do not need any configuration for bootstrapping the cluster. </span></p>
                </div>
                <div id="sec7" class="vm-doc-section item_tl">
                    <h2 id="conclusion">
                        Conclusion
                    </h2>
                    <p><span>VMware vSphere with Tanzu provides an enterprise platform for both traditional applications as well as modern applications, so customers can run existing enterprise applications alongside containerized applications in a unified manner while maintaining application portability.</span></p>
                    <p><span>Deliver Developer-ready Infrastructure: IT teams can use the existing vSphere environments to deploy an enterprise-grade Kubernetes infrastructure at a rapid pace (within one hour) while enabling enterprise-class governance, reliability, and security. After this one-time setup, vSphere with Tanzu enables a simple, fast, and self-service provisioning of Tanzu Kubernetes clusters within a few minutes. Aligning DevOps teams and IT teams is critical to the success of modern application development; to bring efficiency, scale, and security to Kubernetes deployments and operations. vSphere with Tanzu brings agile cloud operations to the IT admin to enable this transition into the role of Cloud Admin or SRE by delivering agility in day-to-day IT operations related to Kubernetes infrastructure. </span></p>
                    <p><span>Scale Without Compromise: vSphere can scale your infrastructure to meet the demands of high-performance applications and memory intensive databases. </span></p>
                    <p><span>Simplify Operations: Simplified operations are delivered through key capabilities of vSphere 7, including elastic infrastructure for sharing resources, simplified lifecycle management, and intrinsic security across your hybrid cloud infrastructure.</span></p>
                </div>
                <div id="sec8" class="vm-doc-section item_tl">
                    <h2 id="references">
                        References
                    </h2>
                    <ul>
                        <li><a href="https://www.vmware.com/products/vsphere.html" target="_blank"><span>VMware vSphere</span></a></li>
                        <li><a href="https://www.vmware.com/products/vsan.html" target="_blank"><span>VMware vSAN</span></a></li>
                        <li><a href="https://docs.vmware.com/en/VMware-vSphere/7.0/vmware-vsphere-with-tanzu/GUID-C163490C-BE03-4DFE-8A03-5316D3245765.html" target="_blank"><span>VMware vSphere with Tanzu</span></a></li>
                        <li><a href="https://www.vmware.com/products/cloud-native-storage.html" target="_blank"><span>VMware Cloud Native Storage in vSphere and vSAN</span></a></li>
                        <li><a href="https://www.confluent.io/online-talk/best-practices-for-apache-kafka-in-production-confluent-online-talk-series/" target="_blank"><span>Confluent Best Practices for Apache Kafka in Production</span></a></li>
                        <li><a href="https://www.confluent.io/resources/recommendations-developers-using-confluent-cloud/" target="_blank"><span>Kafka Best Practices in Confluent Cloud</span></a><span> </span></li>
                        <li><a href="https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid/1.2/vmware-tanzu-kubernetes-grid-12/GUID-extensions-prometheus.html" target="_blank"><span>Deploy Prometheus on Tanzu Kubernetes Clusters</span></a></li>
                        <li><a href="https://www.dellemc.com/en-us/converged-infrastructure/vxrail/index.htm" target="_blank"><span>Dell EMC VxRail</span></a></li>
                    </ul>
                    <p><span>VMware vSphere with Tanzu provides an enterprise platform for both traditional applications as well as modern applications, so customers can run existing enterprise applications alongside containerized applications in a unified manner while maintaining application portability.</span></p>
                    <p><span>Deliver Developer-ready Infrastructure: IT teams can use the existing vSphere environments to deploy an enterprise-grade Kubernetes infrastructure at a rapid pace (within one hour) while enabling enterprise-class governance, reliability, and security. After this one-time setup, vSphere with Tanzu enables a simple, fast, and self-service provisioning of Tanzu Kubernetes clusters within a few minutes. Aligning DevOps teams and IT teams is critical to the success of modern application development; to bring efficiency, scale, and security to Kubernetes deployments and operations. vSphere with Tanzu brings agile cloud operations to the IT admin to enable this transition into the role of Cloud Admin or SRE by delivering agility in day-to-day IT operations related to Kubernetes infrastructure. </span></p>
                    <p><span>Scale Without Compromise: vSphere can scale your infrastructure to meet the demands of high-performance applications and memory intensive databases. </span></p>
                    <p><span>Simplify Operations: Simplified operations are delivered through key capabilities of vSphere 7, including elastic infrastructure for sharing resources, simplified lifecycle management, and intrinsic security across your hybrid cloud infrastructure.</span></p>
                </div>
                <div id="sec9" class="vm-doc-section item_tl">
                    <h2 id="appendix-the-helmprovidersprivateyaml-file-from-the-confluent-operator-fileset">
                        Appendix: The Helm/Providers/private.yaml file from the Confluent Operator Fileset
                    </h2>
                    <p>See the Appendix section of <a href="https://core.vmware.com/resource/running-modern-applications-vmware-cloud-foundation-tanzu-dell-emc-vxrail" ><span>Running Modern Applications with VMware Cloud Foundation with Tanzu</span></a><a href="https://core.vmware.com/resource/running-modern-applications-vmware-cloud-foundation-tanzu-dell-emc-vxrail" > on Dell EMC VxRail</a> for detailed scripts. And you can edit the parameters as appropriate for your setting.&nbsp;</p>
                    <p><span>VMware vSphere with Tanzu provides an enterprise platform for both traditional applications as well as modern applications, so customers can run existing enterprise applications alongside containerized applications in a unified manner while maintaining application portability.</span></p>
                    <p><span>Deliver Developer-ready Infrastructure: IT teams can use the existing vSphere environments to deploy an enterprise-grade Kubernetes infrastructure at a rapid pace (within one hour) while enabling enterprise-class governance, reliability, and security. After this one-time setup, vSphere with Tanzu enables a simple, fast, and self-service provisioning of Tanzu Kubernetes clusters within a few minutes. Aligning DevOps teams and IT teams is critical to the success of modern application development; to bring efficiency, scale, and security to Kubernetes deployments and operations. vSphere with Tanzu brings agile cloud operations to the IT admin to enable this transition into the role of Cloud Admin or SRE by delivering agility in day-to-day IT operations related to Kubernetes infrastructure. </span></p>
                    <p><span>Scale Without Compromise: vSphere can scale your infrastructure to meet the demands of high-performance applications and memory intensive databases. </span></p>
                    <p><span>Simplify Operations: Simplified operations are delivered through key capabilities of vSphere 7, including elastic infrastructure for sharing resources, simplified lifecycle management, and intrinsic security across your hybrid cloud infrastructure.</span></p>
                    <p><span>VMware vSphere with Tanzu provides an enterprise platform for both traditional applications as well as modern applications, so customers can run existing enterprise applications alongside containerized applications in a unified manner while maintaining application portability.</span></p>
                    <p><span>Deliver Developer-ready Infrastructure: IT teams can use the existing vSphere environments to deploy an enterprise-grade Kubernetes infrastructure at a rapid pace (within one hour) while enabling enterprise-class governance, reliability, and security. After this one-time setup, vSphere with Tanzu enables a simple, fast, and self-service provisioning of Tanzu Kubernetes clusters within a few minutes. Aligning DevOps teams and IT teams is critical to the success of modern application development; to bring efficiency, scale, and security to Kubernetes deployments and operations. vSphere with Tanzu brings agile cloud operations to the IT admin to enable this transition into the role of Cloud Admin or SRE by delivering agility in day-to-day IT operations related to Kubernetes infrastructure. </span></p>
                    <p><span>Scale Without Compromise: vSphere can scale your infrastructure to meet the demands of high-performance applications and memory intensive databases. </span></p>
                    <p><span>Simplify Operations: Simplified operations are delivered through key capabilities of vSphere 7, including elastic infrastructure for sharing resources, simplified lifecycle management, and intrinsic security across your hybrid cloud infrastructure.</span></p>
                </div>
                <div id="sec10" class="vm-doc-section item_tl">
                    <h2 id="about-the-author">
                        About the Author
                    </h2>
                    <p><span>Yimeng Liu, Solutions Architect in the Solutions Architecture team of the Cloud Platform Business Unit, wrote the original version of this paper.</span></p>
                    <p><span>The following reviewers also contributed to the paper contents:</span></p>
                    <ul>
                        <li><span>Vic Dery, Sr. Principal Engineer of</span> <span>VxRail</span> <span>Technical Marketing in Dell EMC</span></li>
                        <li><span>Tony Foster, Principal Engineer of</span> <span>VxRail</span> <span>Technical Marketing in Dell EMC</span></li>
                        <li><span>David Glynn, Sr. Principal Engineer of</span> <span>VxRail</span> <span>Technical Marketing in Dell EMC</span></li>
                        <li><span>Jason Marques, Sr. Principal Engineer of</span> <span>VxRail</span> <span>Technical Marketing in Dell EMC</span></li>
                        <li><span>Ka Kit Wong,</span> <span>Staff Solutions Architect</span> <span>in the Solutions</span> <span>Architecture team of the Cloud Platform Business Unit</span> <span>in VMware</span></li>
                        <li><span>Myles Gray, Staff Technical Marketing Architect of the Cloud Platform Business Unit</span> <span>in VMware</span></li>
                        <li><span>Rachel Zheng, Product Line Marketing Manager of the Cloud Platform Business Unit</span> <span>in VMware</span></li>
                    </ul>
                    <hr>
                    <div id="_ftn1">
                        <p><a href="#[1-A" ><span>[1]</span></a> <span>S3-compatible object storage is delivered via Cloudian and MinIO integrations with the vSAN Data Persistence platform.</span></p>
                    </div>
                    <p><span>VMware vSphere with Tanzu provides an enterprise platform for both traditional applications as well as modern applications, so customers can run existing enterprise applications alongside containerized applications in a unified manner while maintaining application portability.</span></p>
                    <p><span>Deliver Developer-ready Infrastructure: IT teams can use the existing vSphere environments to deploy an enterprise-grade Kubernetes infrastructure at a rapid pace (within one hour) while enabling enterprise-class governance, reliability, and security. After this one-time setup, vSphere with Tanzu enables a simple, fast, and self-service provisioning of Tanzu Kubernetes clusters within a few minutes. Aligning DevOps teams and IT teams is critical to the success of modern application development; to bring efficiency, scale, and security to Kubernetes deployments and operations. vSphere with Tanzu brings agile cloud operations to the IT admin to enable this transition into the role of Cloud Admin or SRE by delivering agility in day-to-day IT operations related to Kubernetes infrastructure. </span></p>
                    <p><span>Scale Without Compromise: vSphere can scale your infrastructure to meet the demands of high-performance applications and memory intensive databases. </span></p>
                    <p><span>Simplify Operations: Simplified operations are delivered through key capabilities of vSphere 7, including elastic infrastructure for sharing resources, simplified lifecycle management, and intrinsic security across your hybrid cloud infrastructure.</span></p>
                </div>


            </div>
        </div>
    </div>

</div>

<div class="overlay"></div>

<!--Jquery lib-->
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<script>

    $('.has-child >.nav-link').click(function () {
        $('.has-child >.nav-link').removeClass("active");
        $('.has-child').removeClass("active");
        if (!$(this).hasClass("active")) {
            $(this).addClass("active");
            $(this).parents('.has-child').addClass("active");
        } else {
            $(this).removeClass("active");
            $(this).removeClass('.has-child').addClass("active");
        }
    });

    $('.has-child button').click(function () {
        $(this).parents('.has-child').toggleClass("active");
    });
    $('.vm_toggle').click(function () {
        $(this).toggleClass("active");
        $('body').toggleClass("open-doc-sidebar");
    });

    $('.vm-doc-sidebar a[href*=#], .overlay').click(function () {
        $('body').removeClass("open-doc-sidebar");
    });


    setTimeout(function (){
        //LAD: If it not in setTimeout, it not work correctly
        $(window).scroll(function() {
            var scrollDistance = $(window).scrollTop() + 20;

            console.log(" Distance = " , scrollDistance);

            var lastHrefScrool = null;
            var changeHrefScrool = null;

            $('.item_tl').each(function(i) {
                if ($(this).position().top <= scrollDistance) {
                    $('.nav-item  a.active').removeClass('active');
                    $('.nav-item  a').eq(i).addClass('active');

                    $('.nav-item .nav-link').parents('.nav-item').removeClass("active");
                    $('.nav-item .nav-link.active').parents('.nav-item').addClass("active");

                    changeHrefScrool = $('.nav-item  a').eq(i).attr('href');

                }
            });

            if(lastHrefScrool != changeHrefScrool){
                lastHrefScrool = changeHrefScrool;
                console.log(" Scrool, auto change URL To lastHrefScrool = " + lastHrefScrool);
                window.location.hash = lastHrefScrool;
            }

        }).scroll();
    }, 500);


</script>
</body>

</html>